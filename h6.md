x) Lets encrypt - How it works -kirjoituksen muistiinpanot

- Let’s Encrypt ja ACME-protokolla mahdollistavat automaattisen HTTPS-varmenteen hankinnan ilman ihmisen väliintuloa verkkopalvelimelle.
- Varmenteen hankinnan vaiheet:
  - Palvelimen on todistettava, että se hallitsee verkkotunnusta.
  - Kun hallinta on vahvistettu, palvelin voi pyytää, uusia ja perua varmenteita automaattisesti.
- Verkkotunnuksen hallinnan todistaminen:
  - Palvelimen ylläpitäjä tunnistetaan julkisella avaimella.
  - Ensimmäisellä käyttökerralla palvelinohjelmisto (agentti) luo avainparin ja todistaa verkkotunnuksen hallinnan varmentajalle (CA).
- CA antaa haasteita, joilla palvelin voi todistaa hallinnan, esim.:
  - Lisäämällä tietyn DNS-tietueen verkkotunnukseen.
  - Luomalla tietyn tiedoston palvelimen verkkosivulle.
- Palvelin suorittaa yhden haasteista ja allekirjoittaa CA:n antaman nonce-arvon yksityisellä avaimellaan.
- CA tarkistaa haasteen suorittamisen ja myöntää palvelimelle oikeuden hallita verkkotunnuksen varmenteita.
- Sertifikaatin (varmenteen) myöntäminen:
  - Kun palvelin on valtuutettu, se voi pyytää varmenteen.
  - Palvelin lähettää varmenteen allekirjoituspyynnön (CSR) CA:lle.
  - CA tarkistaa pyynnön, myöntää varmenteen ja tallentaa sen julkisiin Certificate Transparency -lokitietoihin.
- Sertifikaatin peruminen:
  - Jos varmenne täytyy perua, palvelin lähettää allekirjoitetun perumispyynnön CA:lle.
  - CA tarkistaa pyynnön ja julkaisee peruutustiedon, jolloin selain ei enää hyväksy sertifikaattia.

---
Lähteet
---
